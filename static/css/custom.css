/* ========================================
   LLM Code Assist — Premium Design System
   ======================================== */

/* Google Fonts — Inter + JetBrains Mono */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap');

/* ── CSS Custom Properties (Design Tokens) ── */
:root {
    --bg-base:      #060610;
    --bg-surface:   #0a0a1a;
    --bg-elevated:  #0f0f24;
    --bg-hover:     #14142e;
    --bg-active:    #18183a;
    --bg-card:      rgba(15,15,36,0.8);
    --border-subtle:  rgba(99,102,241,0.08);
    --border-default: rgba(99,102,241,0.18);
    --border-focus:   rgba(99,102,241,0.6);
    --border-card:    rgba(255,255,255,0.05);
    --accent:         #6366f1;
    --accent-light:   #818cf8;
    --accent-hover:   #4f46e5;
    --accent-dim:     rgba(99,102,241,0.12);
    --accent-glow:    rgba(99,102,241,0.25);
    --text-primary:   #f1f5f9;
    --text-secondary: #94a3b8;
    --text-muted:     #475569;
    --text-accent:    #818cf8;
    --success:       #22c55e;
    --success-dim:   rgba(34,197,94,0.12);
    --error:         #ef4444;
    --error-dim:     rgba(239,68,68,0.12);
    --warning:       #f59e0b;
    --warning-dim:   rgba(245,158,11,0.12);
    --info:          #3b82f6;
    --shadow-sm:   0 1px 4px rgba(0,0,0,0.5);
    --shadow-md:   0 4px 20px rgba(0,0,0,0.6);
    --shadow-lg:   0 8px 40px rgba(0,0,0,0.7);
    --shadow-glow: 0 0 30px rgba(99,102,241,0.3);
    --r-sm: 6px; --r-md: 10px; --r-lg: 14px; --r-xl: 20px; --r-full: 9999px;
    --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
    --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
}

*, *::before, *::after { box-sizing: border-box; }
html { color-scheme: dark; }
body { font-family: var(--font-sans); background: var(--bg-base); color: var(--text-primary); line-height: 1.5; -webkit-font-smoothing: antialiased; }

::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(99,102,241,0.25); border-radius: var(--r-full); }
::-webkit-scrollbar-thumb:hover { background: rgba(99,102,241,0.5); }

#app { position: relative; }
#app::before {
    content: '';
    position: fixed; inset: 0; z-index: 0; pointer-events: none;
    background:
        radial-gradient(ellipse 80% 60% at 20% 10%, rgba(99,102,241,0.06) 0%, transparent 60%),
        radial-gradient(ellipse 60% 40% at 80% 90%, rgba(139,92,246,0.06) 0%, transparent 60%),
        radial-gradient(ellipse 40% 30% at 50% 50%, rgba(6,182,212,0.03) 0%, transparent 70%);
    animation: meshShift 20s ease-in-out infinite alternate;
}
@keyframes meshShift {
    from { opacity: 0.7; transform: scale(1); }
    to   { opacity: 1;   transform: scale(1.05); }
}

#sidebar {
    position: relative;
    background: var(--bg-surface);
    border-right: 1px solid var(--border-subtle);
    z-index: 10; flex-shrink: 0;
}
#sidebar::after {
    content: ''; position: absolute; top: 0; right: -1px; bottom: 0; width: 1px;
    background: linear-gradient(to bottom, transparent 0%, var(--accent) 30%, var(--accent) 70%, transparent 100%);
    opacity: 0.2; pointer-events: none;
}

.nav-link {
    position: relative; display: flex; align-items: center; gap: 10px;
    padding: 9px 12px; border-radius: var(--r-md); font-size: 0.875rem; font-weight: 500;
    color: var(--text-secondary); transition: all 0.2s ease; cursor: pointer;
    text-decoration: none; user-select: none; overflow: hidden;
}
.nav-link::before {
    content: ''; position: absolute; left: 0; top: 50%;
    transform: translateY(-50%) scaleY(0); width: 3px; height: 55%;
    background: linear-gradient(to bottom, var(--accent-light), var(--accent));
    border-radius: 0 3px 3px 0;
    transition: transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.nav-link:hover { background: var(--accent-dim); color: var(--text-primary); }
.nav-link.active { background: rgba(99,102,241,0.1); color: var(--text-accent); font-weight: 600; }
.nav-link.active::before { transform: translateY(-50%) scaleY(1); }

.project-card {
    background: var(--bg-card); border: 1px solid var(--border-card);
    border-radius: var(--r-lg); padding: 1.25rem; cursor: pointer;
    transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
    animation: slideUpFade 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) both;
    backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
    position: relative; overflow: hidden;
}
.project-card::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
    background: linear-gradient(90deg, transparent, rgba(99,102,241,0.4), transparent);
    opacity: 0; transition: opacity 0.3s ease;
}
.project-card:hover { transform: translateY(-4px) scale(1.01); box-shadow: var(--shadow-lg), 0 0 0 1px var(--border-default); border-color: var(--border-default); }
.project-card:hover::before { opacity: 1; }
.project-card:active { transform: translateY(-2px) scale(0.99); }
.project-card:nth-child(1) { animation-delay: 0.05s; }
.project-card:nth-child(2) { animation-delay: 0.10s; }
.project-card:nth-child(3) { animation-delay: 0.15s; }
.project-card:nth-child(4) { animation-delay: 0.20s; }
.project-card:nth-child(5) { animation-delay: 0.25s; }
.project-card:nth-child(6) { animation-delay: 0.30s; }
@keyframes slideUpFade {
    from { opacity: 0; transform: translateY(20px) scale(0.97); }
    to   { opacity: 1; transform: translateY(0)   scale(1); }
}

.framework-card {
    padding: 1rem; border: 2px solid var(--border-subtle); border-radius: var(--r-lg);
    cursor: pointer; transition: all 0.25s ease; text-align: center;
    background: rgba(10,10,26,0.7); position: relative; overflow: hidden; backdrop-filter: blur(8px);
}
.framework-card::before {
    content: ''; position: absolute; inset: 0;
    background: radial-gradient(circle at 50% -10%, rgba(99,102,241,0.2) 0%, transparent 60%);
    opacity: 0; transition: opacity 0.3s ease;
}
.framework-card:hover { border-color: rgba(99,102,241,0.4); transform: translateY(-2px); box-shadow: var(--shadow-md), 0 0 20px rgba(99,102,241,0.1); }
.framework-card:hover::before { opacity: 1; }
.framework-card.selected { border-color: var(--accent); background: rgba(99,102,241,0.08); box-shadow: 0 0 0 3px rgba(99,102,241,0.12), var(--shadow-md); }
.framework-card.selected::before { opacity: 1; }

.skeleton { background: linear-gradient(90deg, var(--bg-elevated) 25%, var(--bg-hover) 50%, var(--bg-elevated) 75%); background-size: 300% 100%; animation: shimmer 2s ease-in-out infinite; border-radius: var(--r-md); }
.skeleton-card { height: 128px; }
@keyframes shimmer { 0% { background-position: 300% 0; } 100% { background-position: -300% 0; } }

.editor-tab {
    display: flex; align-items: center; gap: 6px; padding: 8px 14px;
    font-size: 0.8125rem; color: var(--text-muted); border-bottom: 2px solid transparent;
    cursor: pointer; white-space: nowrap; transition: all 0.18s ease; flex-shrink: 0; font-family: var(--font-mono);
}
.editor-tab:hover { color: var(--text-primary); background: rgba(30,41,59,0.4); }
.editor-tab.active { color: var(--accent-light); border-bottom-color: var(--accent); background: rgba(99,102,241,0.06); }
.tab-modified { color: var(--warning); font-size: 10px; }

.file-item {
    display: flex; align-items: center; gap: 8px; padding: 4px 8px;
    border-radius: var(--r-sm); cursor: pointer; color: var(--text-secondary);
    font-size: 0.8125rem; transition: all 0.15s ease; user-select: none; font-family: var(--font-mono);
}
.file-item:hover { background: var(--accent-dim); color: var(--text-primary); }
.file-item.active { background: rgba(99,102,241,0.12); color: var(--accent-light); }

.terminal-line { padding: 1px 0; font-family: var(--font-mono); font-size: 0.8125rem; line-height: 1.6; white-space: pre-wrap; word-break: break-all; }
.terminal-line.stdout  { color: #e2e8f0; }
.terminal-line.stderr  { color: #fca5a5; }
.terminal-line.system  { color: #60a5fa; font-style: italic; }
.terminal-line.success { color: #86efac; }

.chat-msg { padding: 0.75rem 1rem; border-radius: var(--r-lg); font-size: 0.875rem; line-height: 1.6; animation: fadeIn 0.3s ease; }
.chat-msg.user { background: rgba(99,102,241,0.12); color: #c7d2fe; margin-left: 1.5rem; border: 1px solid rgba(99,102,241,0.2); }
.chat-msg.ai { background: rgba(15,15,36,0.9); color: var(--text-primary); margin-right: 1.5rem; border: 1px solid var(--border-subtle); }

.typing-indicator { display: flex; align-items: center; gap: 4px; padding: 0.75rem 1rem; background: rgba(15,15,36,0.9); border: 1px solid var(--border-subtle); border-radius: var(--r-lg); margin-right: 1.5rem; }
.typing-dot { width: 7px; height: 7px; background: var(--text-muted); border-radius: 50%; animation: typingBounce 1.2s ease-in-out infinite; }
.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes typingBounce {
    0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
    30%            { transform: translateY(-6px); opacity: 1; }
}

.toast {
    padding: 0.875rem 1.125rem; border-radius: var(--r-lg); font-size: 0.875rem;
    backdrop-filter: blur(20px) saturate(180%); -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(255,255,255,0.08); box-shadow: var(--shadow-lg);
    display: flex; align-items: flex-start; gap: 0.75rem;
    min-width: 300px; max-width: 440px; position: relative; overflow: hidden;
    cursor: pointer; animation: toastSlide 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) both;
    transition: opacity 0.35s ease, transform 0.35s ease;
}
.toast::after {
    content: ''; position: absolute; bottom: 0; left: 0; height: 3px;
    background: currentColor; opacity: 0.4;
    animation: toastProgress var(--duration, 5s) linear forwards;
    border-radius: 0 0 0 var(--r-lg);
}
@keyframes toastProgress { from { width: 100%; } to { width: 0%; } }
.toast.success { background: rgba(6,20,16,0.95); color: #4ade80; border-color: rgba(34,197,94,0.25); }
.toast.error   { background: rgba(20,6,6,0.95);  color: #f87171; border-color: rgba(239,68,68,0.25); }
.toast.info    { background: rgba(6,10,20,0.95); color: #60a5fa; border-color: rgba(59,130,246,0.25); }
.toast.warning { background: rgba(20,15,0,0.95); color: #fbbf24; border-color: rgba(245,158,11,0.25); }
@keyframes toastSlide {
    from { transform: translateX(110%) scale(0.9); opacity: 0; }
    to   { transform: translateX(0) scale(1); opacity: 1; }
}

.connection-status { display: flex; align-items: center; gap: 6px; padding: 5px 12px; background: var(--bg-elevated); border: 1px solid var(--border-subtle); border-radius: var(--r-full); font-size: 0.75rem; color: var(--text-muted); transition: all 0.4s ease; }
.conn-dot { width: 7px; height: 7px; border-radius: 50%; background: var(--text-muted); flex-shrink: 0; transition: background 0.3s ease; }
.conn-dot.connected    { background: var(--success); animation: connPulse 2s ease-in-out infinite; }
.conn-dot.disconnected { background: var(--error); }
.conn-dot.reconnecting { background: var(--warning); animation: connBlink 0.8s ease-in-out infinite; }
@keyframes connPulse { 0%,100% { box-shadow: 0 0 0 0 rgba(34,197,94,0.5); } 50% { box-shadow: 0 0 0 4px rgba(34,197,94,0); } }
@keyframes connBlink { 0%,100% { opacity: 1; } 50% { opacity: 0.3; } }

.stat-card { background: var(--bg-card); border: 1px solid var(--border-card); border-radius: var(--r-lg); padding: 1.25rem; backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); transition: all 0.25s ease; position: relative; overflow: hidden; }
.stat-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px; background: linear-gradient(90deg, transparent, rgba(99,102,241,0.3), transparent); }

.CodeMirror { height: 100% !important; font-family: var(--font-mono) !important; font-size: 13.5px !important; background: var(--bg-base) !important; line-height: 1.7 !important; }
.CodeMirror-gutters { background: var(--bg-surface) !important; border-right: 1px solid var(--border-subtle) !important; min-width: 48px; }
.CodeMirror-linenumber { color: var(--text-muted) !important; font-size: 12px; }
.CodeMirror-cursor { border-left-color: var(--accent-light) !important; border-left-width: 2px !important; }
.CodeMirror-selected { background: rgba(99,102,241,0.18) !important; }
.CodeMirror-activeline-background { background: rgba(99,102,241,0.04) !important; }
.CodeMirror-scroll { overflow-y: auto !important; }

#loading-overlay { backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); }
.loading-bar { height: 3px; width: 100%; background: var(--bg-elevated); border-radius: var(--r-full); overflow: hidden; }
.loading-bar-fill { height: 100%; background: linear-gradient(90deg, var(--accent), #7c3aed, var(--accent)); background-size: 200% 100%; animation: loadingPulse 1.5s ease-in-out infinite; border-radius: var(--r-full); }
@keyframes loadingPulse { 0%,100% { background-position: 0% 50%; width: 30%; margin-left: 0; } 50% { background-position: 100% 50%; width: 60%; margin-left: 20%; } }

#confirm-modal { backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); animation: fadeIn 0.2s ease; }
#confirm-modal .modal-box { background: var(--bg-elevated); border: 1px solid var(--border-default); border-radius: var(--r-xl); box-shadow: var(--shadow-lg), 0 0 60px rgba(0,0,0,0.5); animation: scaleIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
@keyframes scaleIn { from { transform: scale(0.85); opacity: 0; } to { transform: scale(1); opacity: 1; } }

.step-dot { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 700; transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); flex-shrink: 0; }
.step-dot.done   { background: var(--accent); color: white; box-shadow: 0 0 12px var(--accent-glow); }
.step-dot.active { background: rgba(99,102,241,0.2); color: var(--accent-light); border: 2px solid var(--accent); }
.step-dot.pending { background: var(--bg-hover); color: var(--text-muted); border: 2px solid var(--border-subtle); }
.step-connector { flex: 1; height: 2px; background: var(--border-subtle); margin: 0 8px; border-radius: 1px; transition: background 0.4s ease; }
.step-connector.done { background: var(--accent); }

@keyframes fadeIn { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }
@keyframes pulse-glow { 0%,100% { box-shadow: 0 0 0 0 rgba(99,102,241,0); } 50% { box-shadow: 0 0 0 6px rgba(99,102,241,0.2); } }

.status-badge { display: inline-flex; align-items: center; gap: 5px; padding: 3px 10px; border-radius: var(--r-full); font-size: 0.75rem; font-weight: 600; }
.status-badge.online  { background: rgba(34,197,94,0.12); color: #4ade80; }
.status-badge.offline { background: rgba(239,68,68,0.12); color: #f87171; }
.status-dot-animated { width: 6px; height: 6px; border-radius: 50%; background: currentColor; animation: connPulse 2s ease-in-out infinite; }

.gradient-text { background: linear-gradient(135deg, var(--accent-light), #c084fc); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }

.sidebar-project-link { display: flex; align-items: center; gap: 8px; padding: 5px 10px; border-radius: var(--r-sm); color: var(--text-secondary); font-size: 0.8125rem; cursor: pointer; text-decoration: none; transition: all 0.15s ease; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }
.sidebar-project-link:hover { background: var(--accent-dim); color: var(--text-primary); }

.empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 4rem 2rem; text-align: center; animation: fadeIn 0.6s ease both; }
.empty-state-icon { width: 80px; height: 80px; border-radius: var(--r-xl); background: var(--accent-dim); border: 1px solid var(--border-default); display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem; animation: pulse-glow 3s ease-in-out infinite; }

.settings-row { display: flex; align-items: center; justify-content: space-between; padding: 0.875rem 0; border-bottom: 1px solid var(--border-subtle); }
.settings-row:last-child { border-bottom: none; }
.settings-label { color: var(--text-primary); font-size: 0.875rem; font-weight: 500; }
.settings-description { color: var(--text-muted); font-size: 0.75rem; margin-top: 2px; }

.toggle-switch { position: relative; display: inline-block; width: 42px; height: 24px; flex-shrink: 0; }
.toggle-switch input { opacity: 0; width: 0; height: 0; }
.toggle-slider { position: absolute; inset: 0; background: var(--bg-hover); border: 1px solid var(--border-subtle); border-radius: var(--r-full); cursor: pointer; transition: all 0.3s ease; }
.toggle-slider::before { content: ''; position: absolute; width: 16px; height: 16px; left: 3px; top: 50%; transform: translateY(-50%); background: var(--text-muted); border-radius: 50%; transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
.toggle-switch input:checked + .toggle-slider { background: rgba(99,102,241,0.2); border-color: var(--accent); }
.toggle-switch input:checked + .toggle-slider::before { left: calc(100% - 19px); background: var(--accent); box-shadow: 0 0 8px var(--accent-glow); }

.badge { display: inline-flex; align-items: center; padding: 2px 8px; border-radius: var(--r-full); font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.04em; }
.badge-indigo { background: rgba(99,102,241,0.15); color: var(--accent-light); border: 1px solid rgba(99,102,241,0.25); }
.badge-green  { background: rgba(34,197,94,0.12);  color: #4ade80; border: 1px solid rgba(34,197,94,0.2); }

.glass { background: rgba(15,15,36,0.7); backdrop-filter: blur(16px) saturate(180%); -webkit-backdrop-filter: blur(16px) saturate(180%); border: 1px solid rgba(255,255,255,0.06); }

#sidebar-backdrop { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px); z-index: 30; opacity: 0; transition: opacity 0.3s ease; }
#sidebar-backdrop.visible { display: block; opacity: 1; }

.char-counter { font-size: 0.75rem; color: var(--text-muted); transition: color 0.2s ease; }
.char-counter.warn { color: var(--warning); }
.char-counter.danger { color: var(--error); }

.breadcrumb { display: flex; align-items: center; gap: 6px; font-size: 0.8125rem; color: var(--text-muted); font-family: var(--font-mono); }
.breadcrumb-sep { color: var(--border-default); }
.breadcrumb-current { color: var(--text-primary); font-weight: 500; }

.line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

.screen { transition: opacity 0.2s ease; }
.screen.screen-enter { animation: screenFadeIn 0.25s ease both; }
@keyframes screenFadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

@media (max-width: 1024px) { #chat-panel { display: none !important; } }

@media (max-width: 768px) {
    #sidebar { position: fixed; z-index: 40; height: 100dvh; transform: translateX(-100%); transition: transform 0.3s cubic-bezier(0.4,0,0.2,1); box-shadow: var(--shadow-lg); }
    #sidebar.open { transform: translateX(0); }
    #sidebar-toggle { display: flex !important; }
    .project-card { animation-delay: 0s !important; }
}

/* ── Additional Utility Classes (used by templates) ── */

/* Text utilities */
.text-primary   { color: var(--text-primary); }
.text-secondary { color: var(--text-secondary); }
.text-muted     { color: var(--text-muted); }
.text-accent    { color: var(--accent-light); }

/* Card component */
.card {
    background: var(--bg-card);
    border: 1px solid var(--border-card);
    border-radius: var(--r-lg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
}

/* Input utility */
.input {
    width: 100%;
    background: rgba(10,10,26,0.8);
    border: 1px solid var(--border-subtle);
    border-radius: var(--r-md);
    color: var(--text-primary);
    padding: 0.5rem 0.75rem;
    font-family: var(--font-sans);
    font-size: 0.875rem;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
    outline: none;
}
.input:focus {
    border-color: var(--border-focus);
    box-shadow: 0 0 0 3px rgba(99,102,241,0.12);
}
.input::placeholder { color: var(--text-muted); }

textarea.input { resize: vertical; line-height: 1.6; }

/* Base button */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    border: none;
    border-radius: var(--r-md);
    cursor: pointer;
    font-family: var(--font-sans);
    font-weight: 500;
    font-size: 0.875rem;
    padding: 0.55rem 1.1rem;
    transition: all 0.2s ease;
    text-decoration: none;
    white-space: nowrap;
    user-select: none;
}
.btn:active { transform: scale(0.97); }

/* Small button */
.btn-sm { font-size: 0.8125rem; padding: 0.375rem 0.75rem; }

/* Stat icon */
.stat-icon {
    width: 2.5rem; height: 2.5rem;
    border-radius: var(--r-md);
    display: flex; align-items: center; justify-content: center;
    font-size: 1rem; flex-shrink: 0;
}

/* Screen layout within main content */
.screen {
    flex: 1;
    overflow-y: auto;
    padding: 1.75rem 2rem;
}
.screen.hidden { display: none !important; }

/* Editor screen is special — no padding, uses inner flex */
#screen-editor.screen {
    padding: 0;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

/* Ensure badge classes have display */
.badge-indigo { display: inline-flex; }
.badge-green  { display: inline-flex; }

/* Chat message bubble wrapper */
.chat-msg-bubble { }

/* Section dividers */
.section-divider {
    height: 1px;
    background: var(--border-subtle);
    margin: 1rem 0;
}
